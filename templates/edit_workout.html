
{% extends "layout.html" %}

{% block title %}Edit workout{% endblock %}

{% block content %}


<form action="/edit_workout" method="post">

  {% for i in range(0, number_of_exercises) %}

      {% if exercise_details[i|string] %}

        <label for="{{ "exercise_" ~ i }}">Choose an exercise:</label> 
        <select name="{{ "exercise_" ~ i }}" id="{{ "exercise_" ~ i }}">

        {% for exercise in exercises %}
          {% if exercise_details[i|string]["exercise_id"] == exercise.exercise_id %} 
            <option value="{{ exercise.exercise_id }}" selected>{{ exercise.exercise_name }}</option>
          {% else %}
            <option value="{{ exercise.exercise_id }}">{{ exercise.exercise_name }}</option>
          {% endif %}
        {% endfor %}
        </select>

        <label for="{{ "purpose_" ~ i }}">Choose a purpose:</label>
        <select name="{{ "purpose_" ~ i }}" id="{{ "purpose_" ~ i }}">

        {% for purpose in purposes %} 
          {% if exercise_details[i|string]["purpose_id"] == purpose.purpose_id %} 
            <option value="{{ purpose.purpose_id }}" selected>{{ purpose.purpose_name }}</option>
          {% else %}
            <option value="{{ purpose.purpose_id }}">{{ purpose.purpose_name }}</option>
          {% endif %}          
        {% endfor %}
        </select>       
    
      {% else %}
        <label for="{{ "exercise_" ~ i }}">Choose an exercise:</label>
        <select name="{{ "exercise_" ~ i }}" id="{{ "exercise_" ~ i }}">

        {% for exercise in exercises %} 
          <option value="{{ exercise.exercise_id }}">{{ exercise.exercise_name }}</option>
        {% endfor %}
        </select>

        <label for="{{ "purpose_" ~ i }}">Choose a purpose:</label>
        <select name="{{ "purpose_" ~ i }}" id="{{ "purpose_" ~ i }}">

        {% for purpose in purposes %} 
          <option value="{{ purpose.purpose_id }}">{{ purpose.purpose_name }}</option>
        {% endfor %}
        </select>          
      {% endif %}

    {% if sport_type %}
      {% if exercise_details[i|string] %}
        {% if sport_type == "Strength" %}
        
          <p>
            <label for="{{ "sets_" ~ i }}">Sets: </label><br />
            <input type="number" name="{{ "sets_" ~ i }}" value="{{ exercise_details[i|string]["sets"] }}"/>
          </p>

          <p>
            <label for="{{ "reps_" ~ i }}">Reps: </label><br />
            <input type="number" name="{{ "reps_" ~ i }}" value="{{ exercise_details[i|string]["reps"] }}"/>
          </p>

          <p>
            <label for="{{ "weight_" ~ i }}">Weight: </label><br />
            <input type="number" name="{{ "weight_" ~ i }}" value="{{ exercise_details[i|string]["weight"] }}"/>
          </p>

        {% else %}
          <p>
            <label for="{{ "minutes_" ~ i }}">Minutes: </label><br />
            <input type="number" name="{{ "minutes_" ~ i }}" value="{{ exercise_details[i|string]["minutes"] }}"/>
          </p>

          <p>
            <label for="{{ "avghr_" ~ i }}">Average hr: </label><br />
            <input type="number" name="{{ "avghr_" ~ i }}" value="{{ exercise_details[i|string]["avghr"] }}"/>
          </p>

          <p>
            <label for="{{ "kilometers_" ~ i }}">Kilometers: </label><br />
            <input type="number" name="{{ "kilometers_" ~ i }}" value="{{ exercise_details[i|string]["kilometers"] }}"/>
          </p>

        {% endif %}

      {% else %}

        {% if sport_type == "Strength" %}
        
          <p>
            <label for="{{ "sets_" ~ i }}">Sets: </label><br />
            <input type="number" name="{{ "sets_" ~ i }}" value=""/>
          </p>

          <p>
            <label for="{{ "reps_" ~ i }}">Reps: </label><br />
            <input type="number" name="{{ "reps_" ~ i }}" value=""/>
          </p>

          <p>
            <label for="{{ "weight_" ~ i }}">Weight: </label><br />
            <input type="number" name="{{ "weight_" ~ i }}" value=""/>
          </p>

        {% else %}
          <p>
            <label for="{{ "minutes_" ~ i }}">Minutes: </label><br />
            <input type="number" name="{{ "minutes_" ~ i }}" value=""/>
          </p>

          <p>
            <label for="{{ "avghr_" ~ i }}">Average hr: </label><br />
            <input type="number" name="{{ "avghr_" ~ i }}" value=""/>
          </p>

          <p>
            <label for="{{ "kilometers_" ~ i }}">Kilometers: </label><br />
            <input type="number" name="{{ "kilometers_" ~ i }}" value=""/>
          </p>

        {% endif %}          
      
      {% endif %} 

    {% endif %}

  {% endfor %}

  <p>
    <label for="begin_time">Begin time: </label><br />
    <input type="datetime-local" name="begin_time" value="{{ begin_time }}"/> 
  </p>
  <p>
    <label for="end_time">End time: </label><br />
    <input type="datetime-local" name="end_time" value="{{ end_time }}"/> 
  </p>
  <p>
    <label for="comments">Athlete comment: </label><br />
    <textarea name="comments" rows="5" cols="40" maxlength="4000">{{ athlete_comment }}</textarea>
  </p>
  
  <button name="button_action" value="add_exercise">Add exercise</button>    
  <button name="button_action" value="save_workout">Save workout</button>
  <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}" />
  <input type="hidden" name="workout_id" value="{{ workout_id }}">
  <input type="hidden" name="sport_id" value="{{ sport_id }}">
  <input type="hidden" name="source_page" value="edit_workout.html" />
</form>

{% endblock %}
